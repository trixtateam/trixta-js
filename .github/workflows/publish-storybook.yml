name: publish-storybook

on:
  workflow_dispatch:

jobs:
  publish:
    name: Publishing latest story
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Install ðŸ’¿
      run: yarn install --prefer-offline --frozen-lockfile
      
    - name: Build storybook ðŸ“–
      run: yarn build-storybook-docs

    - name: Deploy storybook ðŸš€
      uses: JamesIves/github-pages-deploy-action@3.6.2
      with:
        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
        BRANCH: gh-pages
        FOLDER: storybook-static
        CLEAN: true
